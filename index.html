<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=2.0" />
    <title>Canvas Table</title>

    <style>
      .canvas-wrapper {
        width: 900px;
        height: 300px;
        margin-top: 200px;
        /* border: 1px solid peachpuff; */
        background-color: whitesmoke;
      }
    </style>
  </head>
  <body>
    <div class="canvas-wrapper"></div>
    <script src="https://unpkg.com/rxjs@7.8.1/dist/bundles/rxjs.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/7/Stats.min.js"></script>
    <script src="./index.js"></script>
    <script>
      const canvasTable = new CanvasTable({
        target: document.querySelector('.canvas-wrapper'),
        columns: [
          {
            name: 'fixedLeft',
            key: 'fixedLeft',
            fixed: 'left',
            children: [
              {
                name: 'fixedLeftChild_1',
                key: 'fixedLeftChild_1',
                children: [
                  {
                    name: 'fixedLeftChild_1_1',
                    key: 'fixedLeftChild_1_1',
                  },
                ],
              },
              {
                name: 'fixedLeftChild_2',
                key: 'fixedLeftChild_2',
              },
            ],
          },
          {
            name: 'fixedRight',
            key: 'fixedRight',
            fixed: 'right',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name2',
            key: 'key2',
            children: [
              {
                name: 'child_1',
                key: 'child_1',
                width: 200,
              },
              {
                name: 'child_2',
                key: 'child_2',
                children: [
                  {
                    name: 'child_2_1',
                    key: 'child_2_1',
                  },
                  {
                    name: 'child_2_2',
                    key: 'child_2_2',
                  },
                ],
              },
            ],
          },
          {
            name: 'name3',
            key: 'key3',
            width: 200,
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
          {
            name: 'name1',
            key: 'key1',
          },
        ],
        tableData: [],
      })

      const mockData = Array(40_0000)
        .fill(0)
        .map((_, idx) => {
          return Object.create(null)
        })
      setTimeout(() => {
        canvasTable.setTableData(mockData)
      }, 500)

      console.log('ðŸš€ ~ canvasTable instance:', canvasTable)

      const stats = new Stats()

      stats.showPanel(2) // 0: fps, 1: ms, 2: mb, 3+: custom
      document.body.appendChild(stats.dom)

      function animate() {
        stats.begin()
        stats.end()

        requestAnimationFrame(animate)
      }

      requestAnimationFrame(animate)
    </script>
  </body>
</html>
